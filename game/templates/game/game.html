{% extends 'game/base.html' %}

{% block extra_js %}
    <script type = "text/javascript" src="/static/js/paper.js"></script>
	<script type = "text/javascript" src="/static/js/entity.js"></script>
    <script type = "text/javascript">
        paper.install(window);
        window.onload = function() {
            paper.setup('canvas');
			entitySetup();

			//var snail = new Snail(view.center);
        	var snail = new SnailGroup(5);
		var snailmoo = new SnailGroup(5);

		var horCount = 0;
		var verCount = 0;
		var scaleCount = 0; 
        	view.onFrame = function(event) {
			if (Key.isDown('i') && (scaleCount < 5)) {
			    project.activeLayer.scale(1.25);
			    scaleCount++;
			}
			if (Key.isDown('o') && (scaleCount > -5)) {
			    project.activeLayer.scale(0.8);
			    scaleCount--;
			}
			if (Key.isDown('right') && (horCount < 5)) {
			    project.activeLayer.translate([-100,0]);
			    horCount++;
			}
			if (Key.isDown('left') && (horCount > -5)) {
			    project.activeLayer.translate([100,0]);
			    horCount--;
			}
			if (Key.isDown('up') && (verCount < 5)) {
			    project.activeLayer.translate([0,100]);
			    verCount++;
			}
			if (Key.isDown('down') && (verCount > -5)) {
			    project.activeLayer.translate([0,-100]);
			    verCount--;
			}
		    	snailUpdate();
			snail.move();
		        snailmoo.move();
			}
        
        	var click = true;
        	tool.onMouseDown = function(event) {
				if (click) {
            		snail.setDestination(event.point);
				} else {
					snailmoo.setDestination(event.point);
				}
				click = !click;
        	}
 		}
    </script>
{% endblock %}

{% block content %}
<canvas id="canvas" class="grid_12" style="height:600px" resize></canvas>

<img src="/static/img/snail_teeth.png" class="grid_1" id="snail" height="42" width="42" style="visibility:hidden; position: absolute; top:1px; left:1px" />
{% endblock %}
